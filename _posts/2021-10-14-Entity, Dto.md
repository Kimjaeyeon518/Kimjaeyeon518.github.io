---
layout: post
title: Entity, Dto
date: 2021-10-12 23:18 +0800
# last_modified_at: 2021-10-12 23:19 +0800
tags: [Entity, Dto]
toc: true
---

# Entity, Dto

<br/>
스프링 프로젝트를 개발할 때 **Entity**와 **Dto**를 **분리하는 경우**와 **통합하는 경우**가 있는데, 어떤 방식이 더 좋은 지에 대해 공부하다보니 **전자가 더 좋다**고 생각하여 그 이유에 대해 정리해보겠습니다.

그 전에 **Entity**와 **Dto**가 무엇인지에 대해 간단하게 알아보겠습니다.

<br/>
## Entity

- Entity는 JPA에서 테이블에 대응하는 하나의 클래스입니다. (클래스 - 테이블 매핑 관계)

- DB에서 영속적으로 저장된 데이터를 자바 객체로 매핑하여 '인스턴스'의 형태로 존재하는 데이터로 @Entity, @Column, @Id 등의 Annotation을 사용합니다. (객체 - 테이블 Row 매핑 관계)

<br/>
## Dto

- 계층 간 데이터 교환이나 View와 데이터를 교환할 때 사용하는 객체

- DB로부터 데이터를 얻어 Service나 Controller 등으로 보낼 때 사용하는 객체

- 로직을 갖고 있지 않은 데이터 객체이며, getter/setter 메서드와 간단한 로직만을 갖습니다.

<br/>
### ex) Create가 이루어지는 과정

![placeholder](/assets/entity.png)

<br/>
### 위의 두 내용을 간단히 구분하면 Entity는 DB Layer와의 데이터 교환을 위한 클래스이고, Dto는 View Layer와의 데이터 교환을 위한 클래스입니다.

<br/>
## ★ Entity와 Dto를 분리해야 하는 이유
<br/>

### View Layer와 통신하는 클래스는 UI 요건에 따라 자주 변경될 수 있습니다.

<br/>

- Entity는 테이블과 매핑되는 클래스이기 때문에 변경될 일이 적고, 영향 범위도 매우 크기 때문에 최대한 메서드나 로직 없이 테이블 그대로의 속성을 유지해야 합니다.

### 테이블에 매핑되는 정보가 실제 View에서 원하는 정보와 다를 수 있습니다.

<br/>
- 이러한 경우에는 정보를 변환하는 로직이 필요한 데, 해당 로직이 Entity에 들어가게 되면 Entity 클래스가 지저분해지는 동시에 **객체 설계가 망가지기 때문에** 이러한 로직을 Dto 클래스에 추가하여 사용하면 도메인 모델링을 깨뜨리지 않습니다.

- 또한, DB로부터 조회된 모든 Entity를 View로 넘기게 되면, 원하지 않는 정보까지 전달하게 되어 **정보 노출에 대한 문제**가 생길 수 있고, 이를 막기 위한 **방어 로직**들이 생기게 됩니다. 이 때 원하는 정보만 담겨져 있는 Dto를 설계하여 사용한다면 이러한 방어 로직을 추가하지 않아도 되기 때문에 Entity와 Dto 클래스는 구분하여 사용하는 것이 좋습니다.
